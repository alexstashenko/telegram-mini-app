<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>STAR Method Mini App</title>
    
    <!-- Telegram Web App Script -->
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    
    <!-- React and Babel -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>
    
    <style>
        body {
            margin: 0;
            padding: 0;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif;
        }
        .telegram-viewport {
            height: 100vh;
            overflow-x: hidden;
        }
    </style>
</head>
<body>
    <div id="root" class="telegram-viewport"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;
        const { ArrowRight, ArrowLeft, Users, Target, Zap, Trophy, BookOpen, MessageCircle } = lucide;

        const StarMethodMiniApp = () => {
          const [currentView, setCurrentView] = useState('home');
          const [activeStep, setActiveStep] = useState(0);

          // Инициализация для Telegram Mini App
          useEffect(() => {
            if (window.Telegram?.WebApp) {
              window.Telegram.WebApp.ready();
              window.Telegram.WebApp.expand();
              window.Telegram.WebApp.setHeaderColor('#1e40af');
            }
          }, []);

          const starSteps = [
            {
              letter: 'S',
              title: 'Situation',
              titleRu: 'Ситуация',
              description: 'Опишите контекст',
              icon: Users,
              color: 'bg-blue-500',
              tips: [
                'Где происходило?',
                'Кто участвовал?',
                'Какие обстоятельства?'
              ],
              example: 'В проекте была критическая ситуация с дедлайном...'
            },
            {
              letter: 'T',
              title: 'Task',
              titleRu: 'Задача',
              description: 'Ваша цель',
              icon: Target,
              color: 'bg-green-500',
              tips: [
                'Что нужно было сделать?',
                'Какая цель?',
                'Ваша ответственность?'
              ],
              example: 'Моя задача - найти решение за 2 дня...'
            },
            {
              letter: 'A',
              title: 'Action',
              titleRu: 'Действие',
              description: 'Что вы делали',
              icon: Zap,
              color: 'bg-orange-500',
              tips: [
                'Конкретные шаги?',
                'Как действовали?',
                'Какие решения?'
              ],
              example: 'Я реорганизовал команду и внедрил новый процесс...'
            },
            {
              letter: 'R',
              title: 'Result',
              titleRu: 'Результат',
              description: 'Итоги',
              icon: Trophy,
              color: 'bg-purple-500',
              tips: [
                'Какой результат?',
                'Что получили?',
                'Чему научились?'
              ],
              example: 'Проект завершен на 3 дня раньше, клиент доволен...'
            }
          ];

          // Home View
          if (currentView === 'home') {
            return React.createElement('div', { className: "min-h-screen bg-gradient-to-b from-blue-600 to-purple-700 text-white" },
              React.createElement('div', { className: "p-4" },
                // Header
                React.createElement('div', { className: "text-center mb-8" },
                  React.createElement('div', { className: "inline-flex items-center justify-center w-20 h-20 bg-white bg-opacity-20 rounded-full mb-4" },
                    React.createElement(MessageCircle, { size: 40 })
                  ),
                  React.createElement('h1', { className: "text-3xl font-bold mb-2" }, 'STAR Method'),
                  React.createElement('p', { className: "text-blue-100" }, 'Структурированные ответы на собеседованиях')
                ),

                // Action Button
                React.createElement('div', { className: "mb-6" },
                  React.createElement('button', {
                    onClick: () => setCurrentView('learn'),
                    className: "w-full bg-white bg-opacity-15 backdrop-blur rounded-xl p-6 text-center hover:bg-opacity-25 transition-all shadow-lg"
                  },
                    React.createElement(BookOpen, { className: "mx-auto mb-3 text-blue-200", size: 32 }),
                    React.createElement('div', { className: "font-bold text-lg mb-1" }, 'Начать обучение'),
                    React.createElement('div', { className: "text-sm text-blue-200" }, 'Пошаговое изучение метода')
                  )
                ),

                // Tips
                React.createElement('div', { className: "mt-6 bg-white bg-opacity-10 backdrop-blur rounded-xl p-4" },
                  React.createElement('h4', { className: "font-semibold mb-3" }, '💡 Почему STAR работает?'),
                  React.createElement('div', { className: "space-y-2 text-sm text-blue-100" },
                    React.createElement('p', null, '• Структурирует ваши мысли'),
                    React.createElement('p', null, '• Показывает конкретные результаты'),
                    React.createElement('p', null, '• Демонстрирует ваши навыки'),
                    React.createElement('p', null, '• Делает ответ запоминающимся')
                  )
                )
              )
            );
          }

          // Learn View
          if (currentView === 'learn') {
            const currentStep = starSteps[activeStep];
            const IconComponent = currentStep.icon;

            return React.createElement('div', { className: "min-h-screen bg-gray-50" },
              // Header
              React.createElement('div', { className: "bg-white shadow-sm sticky top-0 z-10" },
                React.createElement('div', { className: "flex items-center p-4" },
                  React.createElement('button', { 
                    onClick: () => setCurrentView('home'), 
                    className: "mr-3" 
                  },
                    React.createElement(ArrowLeft, { size: 24, className: "text-gray-600" })
                  ),
                  React.createElement('h1', { className: "font-semibold text-gray-800" }, 'Изучение метода')
                ),
                React.createElement('div', { className: "px-4 pb-4" },
                  React.createElement('div', { className: "flex items-center space-x-2" },
                    starSteps.map((_, index) =>
                      React.createElement('div', {
                        key: index,
                        className: `h-2 flex-1 rounded ${index <= activeStep ? 'bg-blue-500' : 'bg-gray-200'}`
                      })
                    )
                  ),
                  React.createElement('p', { className: "text-sm text-gray-500 mt-2" },
                    `Шаг ${activeStep + 1} из ${starSteps.length}`
                  )
                )
              ),

              // Content
              React.createElement('div', { className: "p-4" },
                React.createElement('div', { className: "bg-white rounded-xl shadow-sm p-6 mb-4" },
                  React.createElement('div', { className: "flex items-center mb-4" },
                    React.createElement('div', { className: `w-12 h-12 rounded-full ${currentStep.color} text-white flex items-center justify-center mr-4` },
                      React.createElement(IconComponent, { size: 24 })
                    ),
                    React.createElement('div', null,
                      React.createElement('h2', { className: "text-xl font-bold" }, `${currentStep.letter} - ${currentStep.title}`),
                      React.createElement('p', { className: "text-gray-600" }, currentStep.titleRu)
                    )
                  ),

                  React.createElement('p', { className: "text-gray-700 mb-4" }, currentStep.description),

                  React.createElement('div', { className: "mb-4" },
                    React.createElement('h3', { className: "font-semibold mb-2" }, 'Ключевые вопросы:'),
                    React.createElement('div', { className: "space-y-2" },
                      currentStep.tips.map((tip, index) =>
                        React.createElement('div', { key: index, className: "flex items-start" },
                          React.createElement('div', { className: "w-2 h-2 bg-blue-500 rounded-full mt-2 mr-3 flex-shrink-0" }),
                          React.createElement('span', { className: "text-gray-700" }, tip)
                        )
                      )
                    )
                  ),

                  React.createElement('div', { className: "bg-blue-50 rounded-lg p-4" },
                    React.createElement('h3', { className: "font-semibold mb-2 text-blue-800" }, 'Пример:'),
                    React.createElement('p', { className: "text-blue-700 text-sm" }, currentStep.example)
                  )
                ),

                // Navigation
                React.createElement('div', { className: "flex justify-between" },
                  React.createElement('button', {
                    onClick: () => setActiveStep(Math.max(0, activeStep - 1)),
                    disabled: activeStep === 0,
                    className: "flex items-center px-4 py-2 bg-gray-200 text-gray-700 rounded-lg disabled:opacity-50"
                  },
                    React.createElement(ArrowLeft, { size: 16, className: "mr-1" }),
                    'Назад'
                  ),
                  React.createElement('button', {
                    onClick: () => setActiveStep(Math.min(starSteps.length - 1, activeStep + 1)),
                    disabled: activeStep === starSteps.length - 1,
                    className: "flex items-center px-4 py-2 bg-blue-500 text-white rounded-lg disabled:opacity-50"
                  },
                    'Далее',
                    React.createElement(ArrowRight, { size: 16, className: "ml-1" })
                  )
                ),

                // Final Tips (shown only on last step)
                activeStep === starSteps.length - 1 && 
                React.createElement('div', { className: "mt-6 bg-gradient-to-r from-green-50 to-blue-50 rounded-xl p-4" },
                  React.createElement('h3', { className: "font-semibold mb-3 text-green-800" }, '🎯 Готовы к собеседованию!'),
                  React.createElement('div', { className: "space-y-2 text-sm text-green-700" },
                    React.createElement('p', null, '• Подготовьте 3-5 разных STAR-историй'),
                    React.createElement('p', null, '• Тренируйтесь рассказывать каждую за 1-2 минуты'),
                    React.createElement('p', null, '• Используйте конкретные цифры и факты'),
                    React.createElement('p', null, '• Фокусируйтесь на своих действиях и результатах'),
                    React.createElement('p', null, '• Практикуйтесь вслух перед зеркалом')
                  ),
                  React.createElement('button', {
                    onClick: () => setCurrentView('home'),
                    className: "mt-3 w-full bg-green-600 text-white py-2 rounded-lg font-medium"
                  },
                    '✨ Завершить обучение'
                  )
                )
              )
            );
          }

          return null;
        };

        // Render the app
        const container = document.getElementById('root');
        const root = ReactDOM.createRoot(container);
        root.render(React.createElement(StarMethodMiniApp));
    </script>
</body>
</html>
